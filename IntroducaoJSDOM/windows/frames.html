<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frames - JavaScript Window Object</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        #output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            min-height: 100px;
        }
        iframe {
            border: 2px solid #007bff;
            border-radius: 5px;
            margin: 10px 0;
        }
        .frame-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñºÔ∏è Frames - window.frames[]</h1>
        
        <div class="section">
            <h2>üìù Conceito</h2>
            <p>O array <code>window.frames[]</code> cont√©m refer√™ncias para todos os frames (iframes) presentes na p√°gina atual. Cada frame √© uma janela separada que pode conter seu pr√≥prio documento HTML.</p>
        </div>

        <div class="section">
            <h2>üéØ Exemplos Pr√°ticos</h2>
            
            <h3>Frames de Exemplo:</h3>
            <div class="frame-container">
                <iframe 
                    id="frame1" 
                    name="frame1" 
                    src="data:text/html,<h2>Frame 1</h2><p>Este √© o primeiro frame</p><script>console.log('Frame 1 carregado');</script>" 
                    width="300" 
                    height="150">
                </iframe>
                
                <iframe 
                    id="frame2" 
                    name="frame2" 
                    src="data:text/html,<h2>Frame 2</h2><p>Este √© o segundo frame</p><button onclick='alert(\"Clique do Frame 2!\")'>Clique aqui</button>" 
                    width="300" 
                    height="150">
                </iframe>
            </div>

            <h3>Controles:</h3>
            <button onclick="contarFrames()">üìä Contar Frames</button>
            <button onclick="listarFrames()">üìã Listar Frames</button>
            <button onclick="acessarConteudoFrame()">üìÑ Acessar Conte√∫do do Frame</button>
            <button onclick="adicionarFrame()">‚ûï Adicionar Novo Frame</button>
            <button onclick="removerFrame()">‚ùå Remover √öltimo Frame</button>
            <button onclick="comunicarComFrame()">üí¨ Comunicar com Frame</button>
        </div>

        <div class="section">
            <h2>üíª C√≥digo JavaScript</h2>
            <div class="code-example">
                <pre><code>// Contar n√∫mero de frames
function contarFrames() {
    const quantidade = window.frames.length;
    console.log('N√∫mero de frames:', quantidade);
}

// Listar todos os frames
function listarFrames() {
    for (let i = 0; i < window.frames.length; i++) {
        console.log('Frame', i, ':', window.frames[i]);
    }
}

// Acessar conte√∫do de um frame
function acessarConteudoFrame() {
    try {
        const frame = window.frames[0]; // Primeiro frame
        console.log('T√≠tulo do frame:', frame.document.title);
    } catch (error) {
        console.error('Erro ao acessar frame:', error.message);
    }
}</code></pre>
            </div>
        </div>

        <div id="output">
            <h3>üñ•Ô∏è Sa√≠da do Console:</h3>
            <p>Clique nos bot√µes acima e veja os resultados aqui e no console do navegador (F12).</p>
        </div>
    </div>

    <script>
        // Fun√ß√£o para adicionar mensagens na sa√≠da
        function adicionarSaida(mensagem) {
            const output = document.getElementById('output');
            const p = document.createElement('p');
            p.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${mensagem}`;
            output.appendChild(p);
            console.log(mensagem);
        }

        // Contar frames
        function contarFrames() {
            const quantidade = window.frames.length;
            adicionarSaida(`üìä N√∫mero total de frames: ${quantidade}`);
        }

        // Listar frames
        function listarFrames() {
            adicionarSaida('üìã Listando todos os frames:');
            
            for (let i = 0; i < window.frames.length; i++) {
                const frame = window.frames[i];
                const frameElement = document.getElementsByTagName('iframe')[i];
                
                adicionarSaida(`   Frame ${i}: ${frameElement.name || frameElement.id || 'sem nome'}`);
                
                try {
                    adicionarSaida(`   - URL: ${frame.location.href}`);
                } catch (error) {
                    adicionarSaida(`   - URL: Acesso negado (cross-origin)`);
                }
            }
        }

        // Acessar conte√∫do do frame
        function acessarConteudoFrame() {
            if (window.frames.length === 0) {
                adicionarSaida('‚ùå Nenhum frame encontrado!');
                return;
            }

            try {
                const frame = window.frames[0];
                const frameDoc = frame.document;
                
                adicionarSaida('üìÑ Informa√ß√µes do primeiro frame:');
                adicionarSaida(`   - T√≠tulo: ${frameDoc.title || 'Sem t√≠tulo'}`);
                adicionarSaida(`   - URL: ${frame.location.href}`);
                adicionarSaida(`   - Elementos H2: ${frameDoc.getElementsByTagName('h2').length}`);
                
            } catch (error) {
                adicionarSaida(`‚ùå Erro ao acessar frame: ${error.message}`);
            }
        }

        // Adicionar novo frame
        function adicionarFrame() {
            const container = document.querySelector('.frame-container');
            const novoFrame = document.createElement('iframe');
            const frameNumber = window.frames.length + 1;
            
            novoFrame.id = `frame${frameNumber}`;
            novoFrame.name = `frame${frameNumber}`;
            novoFrame.width = '300';
            novoFrame.height = '150';
            novoFrame.src = `data:text/html,<h2>Frame ${frameNumber}</h2><p>Frame criado dinamicamente</p><p>Timestamp: ${new Date().toLocaleString()}</p>`;
            novoFrame.style.border = '2px solid #28a745';
            
            container.appendChild(novoFrame);
            
            adicionarSaida(`‚ûï Novo frame adicionado: Frame ${frameNumber}`);
            
            // Aguardar carregamento e contar novamente
            setTimeout(() => {
                contarFrames();
            }, 100);
        }

        // Remover √∫ltimo frame
        function removerFrame() {
            const iframes = document.getElementsByTagName('iframe');
            
            if (iframes.length === 0) {
                adicionarSaida('‚ùå Nenhum frame para remover!');
                return;
            }
            
            const ultimoFrame = iframes[iframes.length - 1];
            ultimoFrame.remove();
            
            adicionarSaida('‚ùå √öltimo frame removido');
            
            // Aguardar e contar novamente
            setTimeout(() => {
                contarFrames();
            }, 100);
        }

        // Comunicar com frame
        function comunicarComFrame() {
            if (window.frames.length === 0) {
                adicionarSaida('‚ùå Nenhum frame dispon√≠vel para comunica√ß√£o!');
                return;
            }

            try {
                const frame = window.frames[0];
                
                // Tentar executar c√≥digo no frame
                frame.postMessage('Ol√° do frame pai!', '*');
                
                adicionarSaida('üí¨ Mensagem enviada para o primeiro frame');
                
                // Listener para respostas
                window.addEventListener('message', function(event) {
                    adicionarSaida(`üì® Mensagem recebida: ${event.data}`);
                });
                
            } catch (error) {
                adicionarSaida(`‚ùå Erro na comunica√ß√£o: ${error.message}`);
            }
        }

        // Monitorar mudan√ßas nos frames
        let frameCount = window.frames.length;
        setInterval(() => {
            if (window.frames.length !== frameCount) {
                frameCount = window.frames.length;
                adicionarSaida(`üîÑ Mudan√ßa detectada! Novo total de frames: ${frameCount}`);
            }
        }, 1000);

        // Inicializar
        window.onload = function() {
            adicionarSaida('üöÄ P√°gina carregada! Clique nos bot√µes para explorar os frames.');
            contarFrames();
        };
    </script>
</body>
</html>